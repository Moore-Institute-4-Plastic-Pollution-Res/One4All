<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="One4All">
<title>One4All Package Tutorial • One4All</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="One4All Package Tutorial">
<meta property="og:description" content="One4All">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script async defer src="https://buttons.github.io/buttons.js"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">One4All</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Reference
  </a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--articles">
    <span class="fa fa-university"></span>
     
    Articles
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--articles">
    <a class="dropdown-item" href="../articles/app.html">Validator App Tutorial</a>
    <a class="dropdown-item" href="../articles/package.html">One4All Package Tutorial</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/Moore-Institute-4-Plastic-Pollution-Res/One4All.git">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/MoorePlasticRes">
    <span class="fa fa-twitter fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>One4All Package Tutorial</h1>
                        <h4 data-toc-skip class="author">Hannah Sherrod,
Win Cowger</h4>
            
            <h4 data-toc-skip class="date">2024-04-18</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/Moore-Institute-4-Plastic-Pollution-Res/One4All/blob/HEAD/vignettes/package.Rmd" class="external-link"><code>vignettes/package.Rmd</code></a></small>
      <div class="d-none name"><code>package.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="document-overview">Document Overview<a class="anchor" aria-label="anchor" href="#document-overview"></a>
</h2>
<p>This document outlines the One4All package and highlights the main
functions to validate data without using the validator app. It is the
user’s choice whether to work in the validator app or to use the One4All
package. After reading this document, users will have a better
understanding of the One4All package development and the main functions
to validate, share, and download data. To access the One4All package, go
to our <a href="https://github.com/Moore-Institute-4-Plastic-Pollution-Res/One4All" class="external-link">GitHub</a>
and link it directly to your own device in R.</p>
<p>The One4All package is the backbone of the validator app. If you are
looking for a tutorial on how to use the app see the <a href="app.html">Validator App Tutorial</a>.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>After installing the R package, read in the following library:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/Moore-Institute-4-Plastic-Pollution-Res/One4All" class="external-link">One4All</a></span><span class="op">)</span></span></code></pre></div>
<p>To run the app, run the command <code><a href="../reference/run_app.html">run_app()</a></code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/run_app.html">run_app</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="validate-data-reading-and-formatting-data">Validate Data: Reading and Formatting Data<a class="anchor" aria-label="anchor" href="#validate-data-reading-and-formatting-data"></a>
</h2>
<p>The function below validates data using the One4All package. Replace
the parameters defined below with your actual values or file paths. The
<code>'data_names'</code> should be replaced with the tables from the
rules sheet.</p>
<p><strong><code>'files_data'</code></strong>: A list of file paths for
the dataset to be validated (either ‘CSV’ or ‘Excel’ files).</p>
<p><strong><code>'data_names'</code></strong>: (Optional) A character
vector of names for the datasets. If not provided, names will be
extracted from the file paths.
<code>'(ex. methodology, samples, particles)'</code></p>
<p><strong><code>'file_rules'</code></strong>: A file path for the rules
file, either in ‘CSV’ or ‘Excel’ format.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/validate_data.html">validate_data</a></span><span class="op">(</span></span>
<span>  <span class="va">files_data</span>,</span>
<span>  data_names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  file_rules <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="section level4">
<h4 id="check-for-malicious-files">Check for malicious files<a class="anchor" aria-label="anchor" href="#check-for-malicious-files"></a>
</h4>
<p>The function below checks for malicious files. If any of the provided
files appear to have a malicious extension, the function will stop and
raise an error. The argument, <code>'files'</code>, is a character
vector of file paths, which can be paths to zip or individual files. If
any malicious file is found, the code will return ‘TRUE’, otherwise it
will say ‘FALSE’.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/check_for_malicious_files.html">check_for_malicious_files</a></span><span class="op">(</span><span class="va">files</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="read-rules">Read rules<a class="anchor" aria-label="anchor" href="#read-rules"></a>
</h4>
<p>The function below reads rules from a file or a data frame.
Acceptable file formats are ‘CSV’ or ‘Excel’ files.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/read_rules.html">read_rules</a></span><span class="op">(</span><span class="va">file_rules</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="read-data">Read data<a class="anchor" aria-label="anchor" href="#read-data"></a>
</h4>
<p>The function reads and formats data from ‘CSV’ or ‘Excel’ files. The
argument, <code>'files_data'</code>, is the list of files to be read,
and <code>'data_names'</code>, is the optional vector of names for the
data frames.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/read_data.html">read_data</a></span><span class="op">(</span><span class="va">files_data</span>, data_names <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="where-is-this-data-shared">Where is this data shared?<a class="anchor" aria-label="anchor" href="#where-is-this-data-shared"></a>
</h2>
<p>In the One4All package, the <code>'remote share'</code> function
shares the validated data to MongoDB, CKAN, and/or AmazonS3. The purpose
of having three options is for user preference on where to share their
data:</p>
<p><strong>MongoDB</strong> is a NoSQL database that stores data in BSON
format, allowing for flexible data structures.</p>
<p><strong>CKAN</strong> is an open-source data portal platform,
allowing for managing and sharing datasets.</p>
<p><strong>Amazon S3</strong> is a cloud-based object storage service,
providing scalable and durable storage for a wide variety of data
types.</p>
<p>The <code>'remote_share'</code> function is shown below.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">shared_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/remote_share.html">remote_share</a></span><span class="op">(</span>validation <span class="op">=</span> <span class="va">result_valid</span>,</span>
<span>                            data_formatted <span class="op">=</span> <span class="va">result_valid</span><span class="op">$</span><span class="va">data_formatted</span>,</span>
<span>                            files <span class="op">=</span> <span class="va">test_file</span>,</span>
<span>                            verified <span class="op">=</span> <span class="st">"your_verified_key"</span>,</span>
<span>                            valid_key <span class="op">=</span> <span class="st">"your_valid_key"</span>,</span>
<span>                            valid_rules <span class="op">=</span> <span class="fu">digest</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/digest/man/digest.html" class="external-link">digest</a></span><span class="op">(</span><span class="va">test_rules</span><span class="op">)</span>,</span>
<span>                            ckan_url <span class="op">=</span> <span class="st">"https://example.com"</span>,</span>
<span>                            ckan_key <span class="op">=</span> <span class="st">"your_ckan_key"</span>,</span>
<span>                            ckan_package <span class="op">=</span> <span class="st">"your_ckan_package"</span>,</span>
<span>                            url_to_send <span class="op">=</span> <span class="st">"https://your-url-to-send.com"</span>,</span>
<span>                            rules <span class="op">=</span> <span class="va">test_rules</span>,</span>
<span>                            results <span class="op">=</span> <span class="va">valid_example</span><span class="op">$</span><span class="va">results</span>,</span>
<span>                            s3_key_id <span class="op">=</span> <span class="st">"your_s3_key_id"</span>,</span>
<span>                            s3_secret_key <span class="op">=</span> <span class="st">"your_s3_secret_key"</span>,</span>
<span>                            s3_region <span class="op">=</span> <span class="st">"your_s3_region"</span>,</span>
<span>                            s3_bucket <span class="op">=</span> <span class="st">"your_s3_bucket"</span>,</span>
<span>                            mongo_key <span class="op">=</span> <span class="st">"your_mongo_key"</span>,</span>
<span>                            mongo_collection <span class="op">=</span> <span class="st">"your_mongo_collection"</span>,</span>
<span>                            old_cert <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="how-is-the-data-downloaded">How is the data downloaded?<a class="anchor" aria-label="anchor" href="#how-is-the-data-downloaded"></a>
</h2>
<p>The <code>'remote_download'</code> function allows users to download
data from MongoDB, CKAN, and/or AmazonS3. The data is retrieved based on
the <code>'hashed_data'</code> identifier (the dataset ID from a
downloaded certificate) and assumes the data is stored using the same
naming conventions provided in the <code>'remote_share'</code>
function.</p>
<p>The <code>'remote_download'</code> function is shown below.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">downloaded_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/remote_download.html">remote_download</a></span><span class="op">(</span>hashed_data <span class="op">=</span> <span class="st">"example_hash"</span>,</span>
<span>                                     ckan_url <span class="op">=</span> <span class="st">"https://example.com"</span>,</span>
<span>                                     ckan_key <span class="op">=</span> <span class="st">"your_ckan_key"</span>,</span>
<span>                                     ckan_package <span class="op">=</span> <span class="st">"your_ckan_package"</span>,</span>
<span>                                     s3_key_id <span class="op">=</span> <span class="st">"your_s3_key_id"</span>,</span>
<span>                                     s3_secret_key <span class="op">=</span> <span class="st">"your_s3_secret_key"</span>,</span>
<span>                                     s3_region <span class="op">=</span> <span class="st">"your_s3_region"</span>,</span>
<span>                                     s3_bucket <span class="op">=</span> <span class="st">"your_s3_bucket"</span>,</span>
<span>                                     mongo_key <span class="op">=</span> <span class="st">"mongo_key"</span>,</span>
<span>                                     mongo_collection <span class="op">=</span> <span class="st">"mongo_collection"</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://mooreplasticresearch.org/" class="external-link">Moore Institute for Plastic Pollution Research</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.8.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
